<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <input 
      type="text"
      placeholder="æœç´¢è€ƒå·æˆ–å§“å..."
      value="{{searchKey}}"
      bindinput="onSearch"
    />
  </view>

  <!-- æˆå‘˜åˆ—è¡¨ -->
  <view class="member-list">
    <block wx:if="{{filteredMembers.length}}">
      <view class="member-item" wx:for="{{filteredMembers}}" wx:key="id">
        <view class="info">
          <view class="name">{{item.name}}</view>
          <view class="detail">
            {{item.exam_number}} | {{item.school_stage}} | {{item.subject}}
          </view>
        </view>

        <block wx:if="{{item.score === null || item.score === undefined}}">
          <view class="score-input">
            <input
              type="number"
              placeholder="0-100"
              value="{{scores[item.id]}}"
              bindinput="onScoreInput"
              data-id="{{item.id}}"
            />
          </view>
        </block>
        <view class="score" wx:else>
          å·²è¯„åˆ†: {{item.score}}
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:else>
      <view class="empty-icon">ğŸ“‹</view>
      <view>{{searchKey ? 'æœªæ‰¾åˆ°ç›¸å…³æˆå‘˜' : 'æš‚æ— å¾…è¯„åˆ†æˆå‘˜'}}</view>
    </view>
  </view>

  <!-- è¯„åˆ†è¿›åº¦ -->
  <view class="progress-panel">
    <view class="progress-title">è¯„åˆ†è¿›åº¦</view>
    <view class="progress-bar">
      <view class="progress-bar-inner" 
            style="width: {{progress}}%">
      </view>
    </view>
    <view class="progress-text">
      å·²è¯„åˆ†: {{scored}}/{{total}} ({{progress}}%)
    </view>

    <!-- æ‰¹é‡æäº¤æŒ‰é’® -->
    <button 
      class="submit-all-btn"
      type="primary" 
      bindtap="submitAllScores"
      loading="{{submitting}}"
      disabled="{{!hasNewScores}}"
    >
      æäº¤å…¨éƒ¨è¯„åˆ†
    </button>

    <!-- æç¤ºæ–‡æœ¬ -->
    <view class="tip-text">
      * è¯„åˆ†æäº¤åå°†æ— æ³•ä¿®æ”¹ï¼Œè¯·ä»”ç»†æ ¸å¯¹
    </view>
  </view>
</view> 